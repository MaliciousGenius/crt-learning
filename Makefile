# =============================================================================================================
.PHONY: *

# -------------------------------------------------------------------------------------------------------------
# переменные
export NAME?=$(shell echo $(shell basename $(shell pwd)) | awk '{print tolower($0)}')

# -------------------------------------------------------------------------------------------------------------
# цель по умолчанию
$(NAME): down build up

# -------------------------------------------------------------------------------------------------------------
# собрать образ
build:
	@docker-compose build --force-rm --no-cache --pull $(NAME)

# -------------------------------------------------------------------------------------------------------------
# установить и запустить контейнер
up:
	@docker-compose up -d

# -------------------------------------------------------------------------------------------------------------
# остановить и удалить контейнер
down:
	@docker-compose down

# -------------------------------------------------------------------------------------------------------------
# консоль
shell:
	@docker-compose exec $(NAME) /bin/bash

#----------------------------------------------------------------------------------------------------------------------
# информация
info:
	@docker-compose ps

#----------------------------------------------------------------------------------------------------------------------
# журнал
logs:
	@docker-compose logs
